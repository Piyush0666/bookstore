{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { initializeComponentRef, EventGroup, css, shallowCompare, getNativeProps, divProperties, composeComponentAs } from '../../Utilities';\nimport { CheckboxVisibility } from './DetailsList.types';\nimport { DetailsRowCheck } from './DetailsRowCheck';\nimport { GroupSpacer } from '../GroupedList/GroupSpacer';\nimport { DetailsRowFields } from './DetailsRowFields';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { SelectionMode, SELECTION_CHANGE } from '../../Selection';\nimport { CollapseAllVisibility } from '../../GroupedList';\nimport { classNamesFunction } from '../../Utilities';\nimport { getId } from '../../Utilities';\nvar getClassNames = classNamesFunction();\nvar DEFAULT_DROPPING_CSS_CLASS = 'is-dropping';\nvar NO_COLUMNS = [];\n\nvar DetailsRowBase =\n/** @class */\nfunction (_super) {\n  __extends(DetailsRowBase, _super);\n\n  function DetailsRowBase(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._root = React.createRef();\n    _this._cellMeasurer = React.createRef();\n    _this._focusZone = React.createRef();\n\n    _this._onSelectionChanged = function () {\n      var selectionState = getSelectionState(_this.props);\n\n      if (!shallowCompare(selectionState, _this.state.selectionState)) {\n        _this.setState({\n          selectionState: selectionState\n        });\n      }\n    };\n    /**\n     * update isDropping state based on the input value, which is used to change style during drag and drop\n     *\n     * when change to true, that means drag enter. we will add default dropping class name\n     * or the custom dropping class name (return result from onDragEnter) to the root elemet.\n     *\n     * when change to false, that means drag leave. we will remove the dropping class name from root element.\n     *\n     * @param newValue - New isDropping state value\n     * @param event - The event trigger dropping state change which can be dragenter, dragleave etc\n     */\n\n\n    _this._updateDroppingState = function (newValue, event) {\n      var isDropping = _this.state.isDropping;\n      var _a = _this.props,\n          dragDropEvents = _a.dragDropEvents,\n          item = _a.item;\n\n      if (!newValue) {\n        if (dragDropEvents.onDragLeave) {\n          dragDropEvents.onDragLeave(item, event);\n        }\n      } else if (dragDropEvents.onDragEnter) {\n        _this._droppingClassNames = dragDropEvents.onDragEnter(item, event);\n      }\n\n      if (isDropping !== newValue) {\n        _this.setState({\n          isDropping: newValue\n        });\n      }\n    };\n\n    initializeComponentRef(_this);\n    _this._events = new EventGroup(_this);\n    _this.state = {\n      selectionState: getSelectionState(props),\n      columnMeasureInfo: undefined,\n      isDropping: false\n    };\n    _this._droppingClassNames = '';\n    return _this;\n  }\n\n  DetailsRowBase.getDerivedStateFromProps = function (nextProps, previousState) {\n    return __assign(__assign({}, previousState), {\n      selectionState: getSelectionState(nextProps)\n    });\n  };\n\n  DetailsRowBase.prototype.componentDidMount = function () {\n    var _a = this.props,\n        dragDropHelper = _a.dragDropHelper,\n        selection = _a.selection,\n        item = _a.item,\n        onDidMount = _a.onDidMount;\n\n    if (dragDropHelper && this._root.current) {\n      this._dragDropSubscription = dragDropHelper.subscribe(this._root.current, this._events, this._getRowDragDropOptions());\n    }\n\n    if (selection) {\n      this._events.on(selection, SELECTION_CHANGE, this._onSelectionChanged);\n    }\n\n    if (onDidMount && item) {\n      // If the item appears later, we should wait for it before calling this method.\n      this._onDidMountCalled = true;\n      onDidMount(this);\n    }\n  };\n\n  DetailsRowBase.prototype.componentDidUpdate = function (previousProps) {\n    var state = this.state;\n    var _a = this.props,\n        item = _a.item,\n        onDidMount = _a.onDidMount;\n    var columnMeasureInfo = state.columnMeasureInfo;\n\n    if (this.props.itemIndex !== previousProps.itemIndex || this.props.item !== previousProps.item || this.props.dragDropHelper !== previousProps.dragDropHelper) {\n      if (this._dragDropSubscription) {\n        this._dragDropSubscription.dispose();\n\n        delete this._dragDropSubscription;\n      }\n\n      if (this.props.dragDropHelper && this._root.current) {\n        this._dragDropSubscription = this.props.dragDropHelper.subscribe(this._root.current, this._events, this._getRowDragDropOptions());\n      }\n    }\n\n    if (columnMeasureInfo && columnMeasureInfo.index >= 0 && this._cellMeasurer.current) {\n      var newWidth = this._cellMeasurer.current.getBoundingClientRect().width;\n\n      columnMeasureInfo.onMeasureDone(newWidth);\n      this.setState({\n        columnMeasureInfo: undefined\n      });\n    }\n\n    if (item && onDidMount && !this._onDidMountCalled) {\n      this._onDidMountCalled = true;\n      onDidMount(this);\n    }\n  };\n\n  DetailsRowBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        item = _a.item,\n        onWillUnmount = _a.onWillUnmount; // Only call the onWillUnmount callback if we have an item.\n\n    if (onWillUnmount && item) {\n      onWillUnmount(this);\n    }\n\n    if (this._dragDropSubscription) {\n      this._dragDropSubscription.dispose();\n\n      delete this._dragDropSubscription;\n    }\n\n    this._events.dispose();\n  };\n\n  DetailsRowBase.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    if (this.props.useReducedRowRenderer) {\n      var newSelectionState = getSelectionState(nextProps);\n\n      if (this.state.selectionState.isSelected !== newSelectionState.isSelected) {\n        return true;\n      }\n\n      return !shallowCompare(this.props, nextProps);\n    } else {\n      return true;\n    }\n  };\n\n  DetailsRowBase.prototype.render = function () {\n    var _a = this.props,\n        className = _a.className,\n        _b = _a.columns,\n        columns = _b === void 0 ? NO_COLUMNS : _b,\n        dragDropEvents = _a.dragDropEvents,\n        item = _a.item,\n        itemIndex = _a.itemIndex,\n        id = _a.id,\n        _c = _a.flatIndexOffset,\n        flatIndexOffset = _c === void 0 ? 2 : _c,\n        _d = _a.onRenderCheck,\n        onRenderCheck = _d === void 0 ? this._onRenderCheck : _d,\n        onRenderDetailsCheckbox = _a.onRenderDetailsCheckbox,\n        onRenderItemColumn = _a.onRenderItemColumn,\n        onRenderField = _a.onRenderField,\n        getCellValueKey = _a.getCellValueKey,\n        selectionMode = _a.selectionMode,\n        _e = _a.rowWidth,\n        rowWidth = _e === void 0 ? 0 : _e,\n        checkboxVisibility = _a.checkboxVisibility,\n        getRowAriaLabel = _a.getRowAriaLabel,\n        getRowAriaDescription = _a.getRowAriaDescription,\n        getRowAriaDescribedBy = _a.getRowAriaDescribedBy,\n        checkButtonAriaLabel = _a.checkButtonAriaLabel,\n        checkboxCellClassName = _a.checkboxCellClassName,\n\n    /** Alias rowFieldsAs as RowFields and default to DetailsRowFields if rowFieldsAs does not exist */\n    rowFieldsAs = _a.rowFieldsAs,\n        selection = _a.selection,\n        indentWidth = _a.indentWidth,\n        enableUpdateAnimations = _a.enableUpdateAnimations,\n        compact = _a.compact,\n        theme = _a.theme,\n        styles = _a.styles,\n        cellsByColumn = _a.cellsByColumn,\n        groupNestingDepth = _a.groupNestingDepth,\n        _f = _a.useFastIcons,\n        useFastIcons = _f === void 0 ? true : _f,\n        cellStyleProps = _a.cellStyleProps,\n        group = _a.group,\n        focusZoneProps = _a.focusZoneProps,\n        _g = _a.disabled,\n        disabled = _g === void 0 ? false : _g;\n    var _h = this.state,\n        columnMeasureInfo = _h.columnMeasureInfo,\n        isDropping = _h.isDropping;\n    var _j = this.state.selectionState,\n        _k = _j.isSelected,\n        isSelected = _k === void 0 ? false : _k,\n        _l = _j.isSelectionModal,\n        isSelectionModal = _l === void 0 ? false : _l;\n    var isDraggable = dragDropEvents ? !!(dragDropEvents.canDrag && dragDropEvents.canDrag(item)) : undefined;\n    var droppingClassName = isDropping ? this._droppingClassNames || DEFAULT_DROPPING_CSS_CLASS : '';\n    var ariaLabel = getRowAriaLabel ? getRowAriaLabel(item) : undefined;\n    var ariaRowDescription = getRowAriaDescription ? getRowAriaDescription(item) : undefined;\n    var ariaDescribedBy = getRowAriaDescribedBy ? getRowAriaDescribedBy(item) : undefined;\n    var canSelect = !!selection && selection.canSelectItem(item, itemIndex) && !disabled;\n    var isContentUnselectable = selectionMode === SelectionMode.multiple;\n    var showCheckbox = selectionMode !== SelectionMode.none && checkboxVisibility !== CheckboxVisibility.hidden;\n    var ariaSelected = selectionMode === SelectionMode.none ? undefined : isSelected;\n    var ariaPositionInSet = group ? itemIndex - group.startIndex + 1 : undefined;\n    var ariaSetSize = group ? group.count : undefined;\n    var focusZoneDirection = focusZoneProps ? focusZoneProps.direction : FocusZoneDirection.horizontal;\n    this._classNames = __assign(__assign({}, this._classNames), getClassNames(styles, {\n      theme: theme,\n      isSelected: isSelected,\n      canSelect: !isContentUnselectable,\n      anySelected: isSelectionModal,\n      checkboxCellClassName: checkboxCellClassName,\n      droppingClassName: droppingClassName,\n      className: className,\n      compact: compact,\n      enableUpdateAnimations: enableUpdateAnimations,\n      cellStyleProps: cellStyleProps,\n      disabled: disabled\n    }));\n    var rowClassNames = {\n      isMultiline: this._classNames.isMultiline,\n      isRowHeader: this._classNames.isRowHeader,\n      cell: this._classNames.cell,\n      cellAnimation: this._classNames.cellAnimation,\n      cellPadded: this._classNames.cellPadded,\n      cellUnpadded: this._classNames.cellUnpadded,\n      fields: this._classNames.fields\n    }; // Only re-assign rowClassNames when classNames have changed.\n    // Otherwise, they will cause DetailsRowFields to unnecessarily\n    // re-render, see https://github.com/microsoft/fluentui/pull/8799.\n    // Refactor DetailsRowFields to generate own styles to remove need for this.\n\n    if (!shallowCompare(this._rowClassNames || {}, rowClassNames)) {\n      this._rowClassNames = rowClassNames;\n    }\n\n    var RowFields = rowFieldsAs ? composeComponentAs(rowFieldsAs, DetailsRowFields) : DetailsRowFields;\n    var rowFields = React.createElement(RowFields, {\n      rowClassNames: this._rowClassNames,\n      rowHeaderId: id + \"-header\",\n      cellsByColumn: cellsByColumn,\n      columns: columns,\n      item: item,\n      itemIndex: itemIndex,\n      isSelected: isSelected,\n      columnStartIndex: (showCheckbox ? 1 : 0) + (groupNestingDepth ? 1 : 0),\n      onRenderItemColumn: onRenderItemColumn,\n      onRenderField: onRenderField,\n      getCellValueKey: getCellValueKey,\n      enableUpdateAnimations: enableUpdateAnimations,\n      cellStyleProps: cellStyleProps\n    });\n    var defaultRole = 'row';\n    var role = this.props.role ? this.props.role : defaultRole;\n    this._ariaRowDescriptionId = getId('DetailsRow-description'); // When the user does not specify any column is a row-header in the columns props,\n    // The aria-labelledby of the checkbox does not specify {id}-header.\n\n    var hasRowHeader = columns.some(function (column) {\n      return !!column.isRowHeader;\n    });\n    var ariaLabelledby = id + \"-checkbox\" + (hasRowHeader ? \" \" + id + \"-header\" : '');\n    return React.createElement(FocusZone, __assign({\n      \"data-is-focusable\": true\n    }, getNativeProps(this.props, divProperties), typeof isDraggable === 'boolean' ? {\n      'data-is-draggable': isDraggable,\n      draggable: isDraggable\n    } : {}, focusZoneProps, {\n      direction: focusZoneDirection,\n      elementRef: this._root,\n      componentRef: this._focusZone,\n      role: role,\n      \"aria-label\": ariaLabel,\n      \"aria-disabled\": disabled || undefined,\n      \"aria-describedby\": ariaRowDescription ? this._ariaRowDescriptionId : ariaDescribedBy,\n      className: this._classNames.root,\n      \"data-selection-index\": itemIndex,\n      \"data-selection-touch-invoke\": true,\n      \"data-selection-disabled\": disabled || undefined,\n      \"data-item-index\": itemIndex,\n      \"aria-rowindex\": ariaPositionInSet === undefined ? itemIndex + flatIndexOffset : undefined,\n      \"aria-level\": groupNestingDepth && groupNestingDepth + 1 || undefined,\n      \"aria-posinset\": ariaPositionInSet,\n      \"aria-setsize\": ariaSetSize,\n      \"data-automationid\": \"DetailsRow\",\n      style: {\n        minWidth: rowWidth\n      },\n      \"aria-selected\": ariaSelected,\n      allowFocusRoot: true\n    }), ariaRowDescription ? React.createElement(\"span\", {\n      key: \"description\",\n      role: \"presentation\",\n      hidden: true,\n      id: this._ariaRowDescriptionId\n    }, ariaRowDescription) : null, showCheckbox && React.createElement(\"div\", {\n      role: \"gridcell\",\n      \"data-selection-toggle\": true,\n      className: this._classNames.checkCell\n    }, onRenderCheck({\n      id: id ? id + \"-checkbox\" : undefined,\n      selected: isSelected,\n      selectionMode: selectionMode,\n      anySelected: isSelectionModal,\n      'aria-label': checkButtonAriaLabel,\n      'aria-labelledby': id ? ariaLabelledby : undefined,\n      canSelect: canSelect,\n      compact: compact,\n      className: this._classNames.check,\n      theme: theme,\n      isVisible: checkboxVisibility === CheckboxVisibility.always,\n      onRenderDetailsCheckbox: onRenderDetailsCheckbox,\n      useFastIcons: useFastIcons\n    })), React.createElement(GroupSpacer, {\n      indentWidth: indentWidth,\n      role: \"gridcell\",\n      count: groupNestingDepth - (this.props.collapseAllVisibility === CollapseAllVisibility.hidden ? 1 : 0)\n    }), item && rowFields, columnMeasureInfo && React.createElement(\"span\", {\n      role: \"presentation\",\n      className: css(this._classNames.cellMeasurer, this._classNames.cell),\n      ref: this._cellMeasurer\n    }, React.createElement(RowFields, {\n      rowClassNames: this._rowClassNames,\n      rowHeaderId: id + \"-header\",\n      columns: [columnMeasureInfo.column],\n      item: item,\n      itemIndex: itemIndex,\n      columnStartIndex: (showCheckbox ? 1 : 0) + (groupNestingDepth ? 1 : 0) + columns.length,\n      onRenderItemColumn: onRenderItemColumn,\n      getCellValueKey: getCellValueKey\n    })), React.createElement(\"span\", {\n      role: \"checkbox\",\n      className: this._classNames.checkCover,\n      \"aria-checked\": isSelected,\n      \"data-selection-toggle\": true\n    }));\n  };\n  /**\n   * measure cell at index. and call the call back with the measured cell width when finish measure\n   *\n   * @param index - The cell index\n   * @param onMeasureDone - The call back function when finish measure\n   */\n\n\n  DetailsRowBase.prototype.measureCell = function (index, onMeasureDone) {\n    var _a = this.props.columns,\n        columns = _a === void 0 ? NO_COLUMNS : _a;\n\n    var column = __assign({}, columns[index]);\n\n    column.minWidth = 0;\n    column.maxWidth = 999999;\n    delete column.calculatedWidth;\n    this.setState({\n      columnMeasureInfo: {\n        index: index,\n        column: column,\n        onMeasureDone: onMeasureDone\n      }\n    });\n  };\n\n  DetailsRowBase.prototype.focus = function (forceIntoFirstElement) {\n    var _a;\n\n    if (forceIntoFirstElement === void 0) {\n      forceIntoFirstElement = false;\n    }\n\n    return !!((_a = this._focusZone.current) === null || _a === void 0 ? void 0 : _a.focus(forceIntoFirstElement));\n  };\n\n  DetailsRowBase.prototype._onRenderCheck = function (props) {\n    return React.createElement(DetailsRowCheck, __assign({}, props));\n  };\n\n  DetailsRowBase.prototype._getRowDragDropOptions = function () {\n    var _a = this.props,\n        item = _a.item,\n        itemIndex = _a.itemIndex,\n        dragDropEvents = _a.dragDropEvents,\n        eventsToRegister = _a.eventsToRegister;\n    var options = {\n      eventMap: eventsToRegister,\n      selectionIndex: itemIndex,\n      context: {\n        data: item,\n        index: itemIndex\n      },\n      canDrag: dragDropEvents.canDrag,\n      canDrop: dragDropEvents.canDrop,\n      onDragStart: dragDropEvents.onDragStart,\n      updateDropState: this._updateDroppingState,\n      onDrop: dragDropEvents.onDrop,\n      onDragEnd: dragDropEvents.onDragEnd,\n      onDragOver: dragDropEvents.onDragOver\n    };\n    return options;\n  };\n\n  return DetailsRowBase;\n}(React.Component);\n\nexport { DetailsRowBase };\n\nfunction getSelectionState(props) {\n  var _a;\n\n  var itemIndex = props.itemIndex,\n      selection = props.selection;\n  return {\n    isSelected: !!(selection === null || selection === void 0 ? void 0 : selection.isIndexSelected(itemIndex)),\n    isSelectionModal: !!((_a = selection === null || selection === void 0 ? void 0 : selection.isModal) === null || _a === void 0 ? void 0 : _a.call(selection))\n  };\n}","map":{"version":3,"mappings":"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","names":["React","initializeComponentRef","EventGroup","css","shallowCompare","getNativeProps","divProperties","composeComponentAs","CheckboxVisibility","DetailsRowCheck","GroupSpacer","DetailsRowFields","FocusZone","FocusZoneDirection","SelectionMode","SELECTION_CHANGE","CollapseAllVisibility","classNamesFunction","getId","getClassNames","DEFAULT_DROPPING_CSS_CLASS","NO_COLUMNS","__extends","props","_super","_this","createRef","selectionState","getSelectionState","state","setState","newValue","event","isDropping","dragDropEvents","item","onDragLeave","onDragEnter","_droppingClassNames","_events","columnMeasureInfo","undefined","DetailsRowBase","nextProps","previousState","dragDropHelper","selection","onDidMount","_root","current","_dragDropSubscription","subscribe","_getRowDragDropOptions","on","_onSelectionChanged","_onDidMountCalled","previousProps","itemIndex","dispose","index","_cellMeasurer","newWidth","getBoundingClientRect","width","onMeasureDone","onWillUnmount","nextState","useReducedRowRenderer","newSelectionState","isSelected","className","_b","columns","id","_c","flatIndexOffset","_d","onRenderCheck","_onRenderCheck","onRenderDetailsCheckbox","onRenderItemColumn","onRenderField","getCellValueKey","selectionMode","_e","rowWidth","checkboxVisibility","getRowAriaLabel","getRowAriaDescription","getRowAriaDescribedBy","checkButtonAriaLabel","checkboxCellClassName","rowFieldsAs","indentWidth","enableUpdateAnimations","compact","theme","styles","cellsByColumn","groupNestingDepth","_f","useFastIcons","cellStyleProps","group","focusZoneProps","_g","disabled","_k","_l","isSelectionModal","isDraggable","canDrag","droppingClassName","ariaLabel","ariaRowDescription","ariaDescribedBy","canSelect","canSelectItem","isContentUnselectable","multiple","showCheckbox","none","hidden","ariaSelected","ariaPositionInSet","startIndex","ariaSetSize","count","focusZoneDirection","direction","horizontal","_classNames","__assign","anySelected","rowClassNames","isMultiline","isRowHeader","cell","cellAnimation","cellPadded","cellUnpadded","fields","_rowClassNames","RowFields","rowFields","rowHeaderId","columnStartIndex","defaultRole","role","_ariaRowDescriptionId","hasRowHeader","some","column","ariaLabelledby","draggable","elementRef","componentRef","_focusZone","root","style","minWidth","allowFocusRoot","key","checkCell","selected","check","isVisible","always","collapseAllVisibility","cellMeasurer","ref","length","checkCover","_a","maxWidth","calculatedWidth","forceIntoFirstElement","focus","eventsToRegister","options","eventMap","selectionIndex","context","data","canDrop","onDragStart","updateDropState","_updateDroppingState","onDrop","onDragEnd","onDragOver","Component","isIndexSelected","isModal"],"sources":["C:\\Users\\Admin\\Desktop\\bookstore\\frontend\\node_modules\\@fluentui\\react\\lib\\components\\src\\components\\DetailsList\\DetailsRow.base.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  initializeComponentRef,\n  EventGroup,\n  css,\n  shallowCompare,\n  getNativeProps,\n  divProperties,\n  composeComponentAs,\n} from '../../Utilities';\nimport { CheckboxVisibility } from './DetailsList.types';\nimport { DetailsRowCheck } from './DetailsRowCheck';\nimport { GroupSpacer } from '../GroupedList/GroupSpacer';\nimport { DetailsRowFields } from './DetailsRowFields';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { SelectionMode, SELECTION_CHANGE } from '../../Selection';\nimport { CollapseAllVisibility } from '../../GroupedList';\nimport { classNamesFunction } from '../../Utilities';\nimport type { IDisposable } from '../../Utilities';\nimport type { IColumn } from './DetailsList.types';\nimport type { IFocusZone } from '../../FocusZone';\nimport type { IDragDropOptions } from '../../DragDrop';\nimport type { IDetailsRowBaseProps, IDetailsRowStyleProps, IDetailsRowStyles } from './DetailsRow.types';\nimport type { IDetailsRowCheckProps } from './DetailsRowCheck.types';\nimport type { IDetailsRowFieldsProps } from './DetailsRowFields.types';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport { getId } from '../../Utilities';\n\nconst getClassNames = classNamesFunction<IDetailsRowStyleProps, IDetailsRowStyles>();\n\nexport interface IDetailsRowSelectionState {\n  isSelected: boolean;\n  isSelectionModal: boolean;\n}\n\nexport interface IDetailsRowState {\n  selectionState: IDetailsRowSelectionState;\n  columnMeasureInfo?: {\n    index: number;\n    column: IColumn;\n    onMeasureDone: (measuredWidth: number) => void;\n  };\n  isDropping?: boolean;\n}\n\nconst DEFAULT_DROPPING_CSS_CLASS = 'is-dropping';\n\nconst NO_COLUMNS: IColumn[] = [];\n\nexport class DetailsRowBase extends React.Component<IDetailsRowBaseProps, IDetailsRowState> {\n  private _events: EventGroup;\n  private _root = React.createRef<HTMLElement>();\n  private _cellMeasurer = React.createRef<HTMLSpanElement>();\n  private _focusZone = React.createRef<IFocusZone>();\n  private _droppingClassNames: string;\n  /** Whether this.props.onDidMount has been called */\n  private _onDidMountCalled: boolean;\n  private _dragDropSubscription?: IDisposable;\n\n  private _classNames: IProcessedStyleSet<IDetailsRowStyles>;\n  private _rowClassNames: IDetailsRowFieldsProps['rowClassNames'];\n  private _ariaRowDescriptionId: string;\n\n  public static getDerivedStateFromProps(\n    nextProps: IDetailsRowBaseProps,\n    previousState: IDetailsRowState,\n  ): IDetailsRowState {\n    return {\n      ...previousState,\n      selectionState: getSelectionState(nextProps),\n    };\n  }\n\n  constructor(props: IDetailsRowBaseProps) {\n    super(props);\n\n    initializeComponentRef(this);\n    this._events = new EventGroup(this);\n\n    this.state = {\n      selectionState: getSelectionState(props),\n      columnMeasureInfo: undefined,\n      isDropping: false,\n    };\n\n    this._droppingClassNames = '';\n  }\n  public componentDidMount(): void {\n    const { dragDropHelper, selection, item, onDidMount } = this.props;\n\n    if (dragDropHelper && this._root.current) {\n      this._dragDropSubscription = dragDropHelper.subscribe(\n        this._root.current,\n        this._events,\n        this._getRowDragDropOptions(),\n      );\n    }\n\n    if (selection) {\n      this._events.on(selection, SELECTION_CHANGE, this._onSelectionChanged);\n    }\n\n    if (onDidMount && item) {\n      // If the item appears later, we should wait for it before calling this method.\n      this._onDidMountCalled = true;\n      onDidMount(this);\n    }\n  }\n\n  public componentDidUpdate(previousProps: IDetailsRowBaseProps) {\n    const state = this.state;\n    const { item, onDidMount } = this.props;\n    const { columnMeasureInfo } = state;\n\n    if (\n      this.props.itemIndex !== previousProps.itemIndex ||\n      this.props.item !== previousProps.item ||\n      this.props.dragDropHelper !== previousProps.dragDropHelper\n    ) {\n      if (this._dragDropSubscription) {\n        this._dragDropSubscription.dispose();\n        delete this._dragDropSubscription;\n      }\n\n      if (this.props.dragDropHelper && this._root.current) {\n        this._dragDropSubscription = this.props.dragDropHelper.subscribe(\n          this._root.current,\n          this._events,\n          this._getRowDragDropOptions(),\n        );\n      }\n    }\n\n    if (columnMeasureInfo && columnMeasureInfo.index >= 0 && this._cellMeasurer.current) {\n      const newWidth = this._cellMeasurer.current.getBoundingClientRect().width;\n\n      columnMeasureInfo.onMeasureDone(newWidth);\n\n      this.setState({\n        columnMeasureInfo: undefined,\n      });\n    }\n\n    if (item && onDidMount && !this._onDidMountCalled) {\n      this._onDidMountCalled = true;\n      onDidMount(this);\n    }\n  }\n\n  public componentWillUnmount(): void {\n    const { item, onWillUnmount } = this.props;\n\n    // Only call the onWillUnmount callback if we have an item.\n    if (onWillUnmount && item) {\n      onWillUnmount(this);\n    }\n\n    if (this._dragDropSubscription) {\n      this._dragDropSubscription.dispose();\n      delete this._dragDropSubscription;\n    }\n\n    this._events.dispose();\n  }\n\n  public shouldComponentUpdate(nextProps: IDetailsRowBaseProps, nextState: IDetailsRowState): boolean {\n    if (this.props.useReducedRowRenderer) {\n      const newSelectionState = getSelectionState(nextProps);\n      if (this.state.selectionState.isSelected !== newSelectionState.isSelected) {\n        return true;\n      }\n      return !shallowCompare(this.props, nextProps);\n    } else {\n      return true;\n    }\n  }\n\n  public render(): JSX.Element {\n    const {\n      className,\n      columns = NO_COLUMNS,\n      dragDropEvents,\n      item,\n      itemIndex,\n      id,\n      flatIndexOffset = 2,\n      onRenderCheck = this._onRenderCheck,\n      onRenderDetailsCheckbox,\n      onRenderItemColumn,\n      onRenderField,\n      getCellValueKey,\n      selectionMode,\n      rowWidth = 0,\n      checkboxVisibility,\n      getRowAriaLabel,\n      getRowAriaDescription,\n      getRowAriaDescribedBy,\n      checkButtonAriaLabel,\n      checkboxCellClassName,\n      /** Alias rowFieldsAs as RowFields and default to DetailsRowFields if rowFieldsAs does not exist */\n      rowFieldsAs,\n      selection,\n      indentWidth,\n      enableUpdateAnimations,\n      compact,\n      theme,\n      styles,\n      cellsByColumn,\n      groupNestingDepth,\n      useFastIcons = true,\n      cellStyleProps,\n      group,\n      focusZoneProps,\n      disabled = false,\n    } = this.props;\n    const { columnMeasureInfo, isDropping } = this.state;\n    const { isSelected = false, isSelectionModal = false } = this.state.selectionState;\n    const isDraggable = dragDropEvents ? !!(dragDropEvents.canDrag && dragDropEvents.canDrag(item)) : undefined;\n    const droppingClassName = isDropping ? this._droppingClassNames || DEFAULT_DROPPING_CSS_CLASS : '';\n    const ariaLabel = getRowAriaLabel ? getRowAriaLabel(item) : undefined;\n    const ariaRowDescription = getRowAriaDescription ? getRowAriaDescription(item) : undefined;\n    const ariaDescribedBy = getRowAriaDescribedBy ? getRowAriaDescribedBy(item) : undefined;\n    const canSelect = !!selection && selection.canSelectItem(item, itemIndex) && !disabled;\n    const isContentUnselectable = selectionMode === SelectionMode.multiple;\n    const showCheckbox = selectionMode !== SelectionMode.none && checkboxVisibility !== CheckboxVisibility.hidden;\n    const ariaSelected = selectionMode === SelectionMode.none ? undefined : isSelected;\n    const ariaPositionInSet = group ? itemIndex - group.startIndex + 1 : undefined;\n    const ariaSetSize = group ? group.count : undefined;\n    const focusZoneDirection = focusZoneProps ? focusZoneProps.direction : FocusZoneDirection.horizontal;\n\n    this._classNames = {\n      ...this._classNames,\n      ...getClassNames(styles, {\n        theme: theme!,\n        isSelected,\n        canSelect: !isContentUnselectable,\n        anySelected: isSelectionModal,\n        checkboxCellClassName,\n        droppingClassName,\n        className,\n        compact,\n        enableUpdateAnimations,\n        cellStyleProps,\n        disabled,\n      }),\n    };\n\n    const rowClassNames: IDetailsRowFieldsProps['rowClassNames'] = {\n      isMultiline: this._classNames.isMultiline,\n      isRowHeader: this._classNames.isRowHeader,\n      cell: this._classNames.cell,\n      cellAnimation: this._classNames.cellAnimation,\n      cellPadded: this._classNames.cellPadded,\n      cellUnpadded: this._classNames.cellUnpadded,\n      fields: this._classNames.fields,\n    };\n\n    // Only re-assign rowClassNames when classNames have changed.\n    // Otherwise, they will cause DetailsRowFields to unnecessarily\n    // re-render, see https://github.com/microsoft/fluentui/pull/8799.\n    // Refactor DetailsRowFields to generate own styles to remove need for this.\n    if (!shallowCompare(this._rowClassNames || {}, rowClassNames)) {\n      this._rowClassNames = rowClassNames;\n    }\n\n    const RowFields = rowFieldsAs ? composeComponentAs(rowFieldsAs, DetailsRowFields) : DetailsRowFields;\n\n    const rowFields = (\n      <RowFields\n        rowClassNames={this._rowClassNames}\n        rowHeaderId={`${id}-header`}\n        cellsByColumn={cellsByColumn}\n        columns={columns}\n        item={item}\n        itemIndex={itemIndex}\n        isSelected={isSelected}\n        columnStartIndex={(showCheckbox ? 1 : 0) + (groupNestingDepth ? 1 : 0)}\n        onRenderItemColumn={onRenderItemColumn}\n        onRenderField={onRenderField}\n        getCellValueKey={getCellValueKey}\n        enableUpdateAnimations={enableUpdateAnimations}\n        cellStyleProps={cellStyleProps}\n      />\n    );\n\n    const defaultRole = 'row';\n    const role = this.props.role ? this.props.role : defaultRole;\n    this._ariaRowDescriptionId = getId('DetailsRow-description');\n\n    // When the user does not specify any column is a row-header in the columns props,\n    // The aria-labelledby of the checkbox does not specify {id}-header.\n    const hasRowHeader = columns.some(column => {\n      return !!column.isRowHeader;\n    });\n    const ariaLabelledby = `${id}-checkbox` + (hasRowHeader ? ` ${id}-header` : '');\n\n    return (\n      <FocusZone\n        data-is-focusable={true}\n        {...getNativeProps(this.props, divProperties)}\n        {...(typeof isDraggable === 'boolean'\n          ? {\n              'data-is-draggable': isDraggable, // This data attribute is used by some host applications.\n              draggable: isDraggable,\n            }\n          : {})}\n        {...focusZoneProps}\n        direction={focusZoneDirection}\n        elementRef={this._root}\n        componentRef={this._focusZone}\n        role={role}\n        aria-label={ariaLabel}\n        aria-disabled={disabled || undefined}\n        aria-describedby={ariaRowDescription ? this._ariaRowDescriptionId : ariaDescribedBy}\n        className={this._classNames.root}\n        data-selection-index={itemIndex}\n        data-selection-touch-invoke={true}\n        data-selection-disabled={disabled || undefined}\n        data-item-index={itemIndex}\n        aria-rowindex={ariaPositionInSet === undefined ? itemIndex + flatIndexOffset : undefined}\n        aria-level={(groupNestingDepth && groupNestingDepth + 1) || undefined}\n        aria-posinset={ariaPositionInSet}\n        aria-setsize={ariaSetSize}\n        data-automationid=\"DetailsRow\"\n        style={{ minWidth: rowWidth }}\n        aria-selected={ariaSelected}\n        allowFocusRoot={true}\n      >\n        {ariaRowDescription ? (\n          <span key=\"description\" role=\"presentation\" hidden={true} id={this._ariaRowDescriptionId}>\n            {ariaRowDescription}\n          </span>\n        ) : null}\n        {showCheckbox && (\n          <div role=\"gridcell\" data-selection-toggle={true} className={this._classNames.checkCell}>\n            {onRenderCheck({\n              id: id ? `${id}-checkbox` : undefined,\n              selected: isSelected,\n              selectionMode,\n              anySelected: isSelectionModal,\n              'aria-label': checkButtonAriaLabel,\n              'aria-labelledby': id ? ariaLabelledby : undefined,\n              canSelect,\n              compact,\n              className: this._classNames.check,\n              theme,\n              isVisible: checkboxVisibility === CheckboxVisibility.always,\n              onRenderDetailsCheckbox: onRenderDetailsCheckbox,\n              useFastIcons,\n            })}\n          </div>\n        )}\n\n        <GroupSpacer\n          indentWidth={indentWidth}\n          role=\"gridcell\"\n          count={groupNestingDepth! - (this.props.collapseAllVisibility === CollapseAllVisibility.hidden ? 1 : 0)}\n        />\n\n        {item && rowFields}\n        {columnMeasureInfo && (\n          <span\n            role=\"presentation\"\n            className={css(this._classNames.cellMeasurer, this._classNames.cell)}\n            ref={this._cellMeasurer}\n          >\n            <RowFields\n              rowClassNames={this._rowClassNames}\n              rowHeaderId={`${id}-header`}\n              columns={[columnMeasureInfo.column]}\n              item={item}\n              itemIndex={itemIndex}\n              columnStartIndex={(showCheckbox ? 1 : 0) + (groupNestingDepth ? 1 : 0) + columns.length}\n              onRenderItemColumn={onRenderItemColumn}\n              getCellValueKey={getCellValueKey}\n            />\n          </span>\n        )}\n\n        <span\n          role=\"checkbox\"\n          className={this._classNames.checkCover}\n          aria-checked={isSelected}\n          data-selection-toggle={true}\n        />\n      </FocusZone>\n    );\n  }\n\n  /**\n   * measure cell at index. and call the call back with the measured cell width when finish measure\n   *\n   * @param index - The cell index\n   * @param onMeasureDone - The call back function when finish measure\n   */\n  public measureCell(index: number, onMeasureDone: (width: number) => void): void {\n    const { columns = NO_COLUMNS } = this.props;\n    const column: IColumn = { ...columns[index] };\n\n    column.minWidth = 0;\n    column.maxWidth = 999999;\n\n    delete column.calculatedWidth;\n\n    this.setState({\n      columnMeasureInfo: {\n        index,\n        column,\n        onMeasureDone,\n      },\n    });\n  }\n\n  public focus(forceIntoFirstElement: boolean = false): boolean {\n    return !!this._focusZone.current?.focus(forceIntoFirstElement);\n  }\n\n  protected _onRenderCheck(props: IDetailsRowCheckProps) {\n    return <DetailsRowCheck {...props} />;\n  }\n\n  private _onSelectionChanged = (): void => {\n    const selectionState = getSelectionState(this.props);\n\n    if (!shallowCompare(selectionState, this.state.selectionState)) {\n      this.setState({\n        selectionState: selectionState,\n      });\n    }\n  };\n\n  private _getRowDragDropOptions(): IDragDropOptions {\n    const { item, itemIndex, dragDropEvents, eventsToRegister } = this.props;\n    const options = {\n      eventMap: eventsToRegister,\n      selectionIndex: itemIndex,\n      context: { data: item, index: itemIndex },\n      canDrag: dragDropEvents!.canDrag,\n      canDrop: dragDropEvents!.canDrop,\n      onDragStart: dragDropEvents!.onDragStart,\n      updateDropState: this._updateDroppingState,\n      onDrop: dragDropEvents!.onDrop,\n      onDragEnd: dragDropEvents!.onDragEnd,\n      onDragOver: dragDropEvents!.onDragOver,\n    };\n\n    return options;\n  }\n\n  /**\n   * update isDropping state based on the input value, which is used to change style during drag and drop\n   *\n   * when change to true, that means drag enter. we will add default dropping class name\n   * or the custom dropping class name (return result from onDragEnter) to the root elemet.\n   *\n   * when change to false, that means drag leave. we will remove the dropping class name from root element.\n   *\n   * @param newValue - New isDropping state value\n   * @param event - The event trigger dropping state change which can be dragenter, dragleave etc\n   */\n  private _updateDroppingState = (newValue: boolean, event: DragEvent): void => {\n    const { isDropping } = this.state;\n    const { dragDropEvents, item } = this.props;\n\n    if (!newValue) {\n      if (dragDropEvents!.onDragLeave) {\n        dragDropEvents!.onDragLeave(item, event);\n      }\n    } else if (dragDropEvents!.onDragEnter) {\n      this._droppingClassNames = dragDropEvents!.onDragEnter(item, event);\n    }\n\n    if (isDropping !== newValue) {\n      this.setState({ isDropping: newValue });\n    }\n  };\n}\n\nfunction getSelectionState(props: IDetailsRowBaseProps): IDetailsRowSelectionState {\n  const { itemIndex, selection } = props;\n\n  return {\n    isSelected: !!selection?.isIndexSelected(itemIndex),\n    isSelectionModal: !!selection?.isModal?.(),\n  };\n}\n"]},"metadata":{},"sourceType":"module"}