{"ast":null,"code":"import { __extends } from \"tslib\";\nimport * as React from 'react';\nimport { Selection } from '../../Selection';\nimport { initializeComponentRef } from '../../Utilities';\n\nvar BaseSelectedItemsList =\n/** @class */\nfunction (_super) {\n  __extends(BaseSelectedItemsList, _super);\n\n  function BaseSelectedItemsList(basePickerProps) {\n    var _this = _super.call(this, basePickerProps) || this;\n\n    _this.addItems = function (items) {\n      var processedItems = _this.props.onItemSelected ? _this.props.onItemSelected(items) : items;\n      var processedItemObjects = processedItems;\n      var processedItemPromiseLikes = processedItems;\n\n      if (processedItemPromiseLikes && processedItemPromiseLikes.then) {\n        processedItemPromiseLikes.then(function (resolvedProcessedItems) {\n          var newItems = _this.state.items.concat(resolvedProcessedItems);\n\n          _this.updateItems(newItems);\n        });\n      } else {\n        var newItems = _this.state.items.concat(processedItemObjects);\n\n        _this.updateItems(newItems);\n      }\n    };\n\n    _this.removeItemAt = function (index) {\n      var items = _this.state.items;\n\n      if (_this._canRemoveItem(items[index])) {\n        if (index > -1) {\n          if (_this.props.onItemsDeleted) {\n            _this.props.onItemsDeleted([items[index]]);\n          }\n\n          var newItems = items.slice(0, index).concat(items.slice(index + 1));\n\n          _this.updateItems(newItems);\n        }\n      }\n    };\n\n    _this.removeItem = function (item) {\n      var items = _this.state.items;\n      var index = items.indexOf(item);\n\n      _this.removeItemAt(index);\n    };\n\n    _this.replaceItem = function (itemToReplace, itemsToReplaceWith) {\n      var items = _this.state.items;\n      var index = items.indexOf(itemToReplace);\n\n      if (index > -1) {\n        var newItems = items.slice(0, index).concat(itemsToReplaceWith).concat(items.slice(index + 1));\n\n        _this.updateItems(newItems);\n      }\n    };\n\n    _this.removeItems = function (itemsToRemove) {\n      var items = _this.state.items;\n      var itemsCanRemove = itemsToRemove.filter(function (item) {\n        return _this._canRemoveItem(item);\n      });\n      var newItems = items.filter(function (item) {\n        return itemsCanRemove.indexOf(item) === -1;\n      });\n      var firstItemToRemove = itemsCanRemove[0];\n      var index = items.indexOf(firstItemToRemove);\n\n      if (_this.props.onItemsDeleted) {\n        _this.props.onItemsDeleted(itemsCanRemove);\n      }\n\n      _this.updateItems(newItems, index);\n    };\n\n    _this.onCopy = function (ev) {\n      if (_this.props.onCopyItems && _this.selection.getSelectedCount() > 0) {\n        var selectedItems = _this.selection.getSelection();\n\n        _this.copyItems(selectedItems);\n      }\n    };\n\n    _this.renderItems = function () {\n      var removeButtonAriaLabel = _this.props.removeButtonAriaLabel;\n      var onRenderItem = _this.props.onRenderItem;\n      var items = _this.state.items;\n      return items.map(function (item, index) {\n        return onRenderItem({\n          item: item,\n          index: index,\n          key: item.key ? item.key : index,\n          selected: _this.selection.isIndexSelected(index),\n          onRemoveItem: function () {\n            return _this.removeItem(item);\n          },\n          onItemChange: _this.onItemChange,\n          removeButtonAriaLabel: removeButtonAriaLabel,\n          onCopyItem: function (itemToCopy) {\n            return _this.copyItems([itemToCopy]);\n          }\n        });\n      });\n    };\n\n    _this.onSelectionChanged = function () {\n      _this.forceUpdate();\n    };\n\n    _this.onItemChange = function (changedItem, index) {\n      var items = _this.state.items;\n\n      if (index >= 0) {\n        var newItems = items;\n        newItems[index] = changedItem;\n\n        _this.updateItems(newItems);\n      }\n    };\n\n    initializeComponentRef(_this);\n    var items = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n    _this.state = {\n      items: items\n    }; // Create a new selection if one is not specified\n\n    _this._defaultSelection = new Selection({\n      onSelectionChanged: _this.onSelectionChanged\n    });\n    return _this;\n  }\n\n  BaseSelectedItemsList.getDerivedStateFromProps = function (newProps) {\n    if (newProps.selectedItems) {\n      return {\n        items: newProps.selectedItems\n      };\n    }\n\n    return null;\n  };\n\n  Object.defineProperty(BaseSelectedItemsList.prototype, \"items\", {\n    get: function () {\n      return this.state.items;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  BaseSelectedItemsList.prototype.removeSelectedItems = function () {\n    if (this.state.items.length && this.selection.getSelectedCount() > 0) {\n      this.removeItems(this.selection.getSelection());\n    }\n  };\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If selectedItems is provided, this will act as a controlled component and will not update its own state.\n   */\n\n\n  BaseSelectedItemsList.prototype.updateItems = function (items, focusIndex) {\n    var _this = this;\n\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to pass the new props\n      this.onChange(items);\n    } else {\n      this.setState({\n        items: items\n      }, function () {\n        _this._onSelectedItemsUpdated(items, focusIndex);\n      });\n    }\n  };\n\n  BaseSelectedItemsList.prototype.hasSelectedItems = function () {\n    return this.selection.getSelectedCount() > 0;\n  };\n\n  BaseSelectedItemsList.prototype.componentDidUpdate = function (oldProps, oldState) {\n    if (this.state.items && this.state.items !== oldState.items) {\n      this.selection.setItems(this.state.items);\n    }\n  };\n\n  BaseSelectedItemsList.prototype.unselectAll = function () {\n    this.selection.setAllSelected(false);\n  };\n\n  BaseSelectedItemsList.prototype.highlightedItems = function () {\n    return this.selection.getSelection();\n  };\n\n  BaseSelectedItemsList.prototype.componentDidMount = function () {\n    this.selection.setItems(this.state.items);\n  };\n\n  Object.defineProperty(BaseSelectedItemsList.prototype, \"selection\", {\n    get: function () {\n      var _a;\n\n      return (_a = this.props.selection) !== null && _a !== void 0 ? _a : this._defaultSelection;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  BaseSelectedItemsList.prototype.render = function () {\n    return this.renderItems();\n  };\n\n  BaseSelectedItemsList.prototype.onChange = function (items) {\n    if (this.props.onChange) {\n      this.props.onChange(items);\n    }\n  };\n\n  BaseSelectedItemsList.prototype.copyItems = function (items) {\n    if (this.props.onCopyItems) {\n      var copyText = this.props.onCopyItems(items);\n      var copyInput = document.createElement('input');\n      document.body.appendChild(copyInput);\n\n      try {\n        // Try to copy the text directly to the clipboard\n        copyInput.value = copyText;\n        copyInput.select();\n\n        if (!document.execCommand('copy')) {\n          // The command failed. Fallback to the method below.\n          throw new Error();\n        }\n      } catch (err) {// no op\n      } finally {\n        document.body.removeChild(copyInput);\n      }\n    }\n  };\n\n  BaseSelectedItemsList.prototype._onSelectedItemsUpdated = function (items, focusIndex) {\n    this.onChange(items);\n  };\n\n  BaseSelectedItemsList.prototype._canRemoveItem = function (item) {\n    return !this.props.canRemoveItem || this.props.canRemoveItem(item);\n  };\n\n  return BaseSelectedItemsList;\n}(React.Component);\n\nexport { BaseSelectedItemsList };","map":{"version":3,"mappings":"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","names":["React","Selection","initializeComponentRef","__extends","basePickerProps","_super","_this","items","processedItems","props","onItemSelected","processedItemObjects","processedItemPromiseLikes","then","resolvedProcessedItems","newItems","state","concat","updateItems","index","_canRemoveItem","onItemsDeleted","slice","item","indexOf","removeItemAt","itemToReplace","itemsToReplaceWith","itemsToRemove","itemsCanRemove","filter","firstItemToRemove","ev","onCopyItems","selection","getSelectedCount","selectedItems","getSelection","copyItems","removeButtonAriaLabel","onRenderItem","map","key","selected","isIndexSelected","onRemoveItem","removeItem","onItemChange","onCopyItem","itemToCopy","forceUpdate","changedItem","defaultSelectedItems","_defaultSelection","onSelectionChanged","BaseSelectedItemsList","newProps","Object","length","removeItems","focusIndex","onChange","setState","_onSelectedItemsUpdated","oldProps","oldState","setItems","setAllSelected","_a","renderItems","copyText","copyInput","document","createElement","body","appendChild","value","select","execCommand","Error","err","removeChild","canRemoveItem","Component"],"sources":["C:\\Users\\Admin\\Desktop\\bookstore\\frontend\\node_modules\\@fluentui\\react\\lib\\components\\src\\components\\SelectedItemsList\\BaseSelectedItemsList.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Selection } from '../../Selection';\nimport { initializeComponentRef } from '../../Utilities';\nimport type {\n  IBaseSelectedItemsList,\n  IBaseSelectedItemsListProps,\n  ISelectedItemProps,\n} from './BaseSelectedItemsList.types';\nimport type { IObjectWithKey } from '../../Utilities';\n\nexport interface IBaseSelectedItemsListState<T> {\n  items: T[];\n}\n\nexport class BaseSelectedItemsList<T, P extends IBaseSelectedItemsListProps<T>>\n  extends React.Component<P, IBaseSelectedItemsListState<T>>\n  implements IBaseSelectedItemsList<T> {\n  protected root: HTMLElement;\n  private _defaultSelection: Selection;\n\n  public static getDerivedStateFromProps(newProps: IBaseSelectedItemsListProps<any>) {\n    if (newProps.selectedItems) {\n      return { items: newProps.selectedItems };\n    }\n\n    return null;\n  }\n\n  constructor(basePickerProps: P) {\n    super(basePickerProps);\n\n    initializeComponentRef(this);\n    const items: T[] = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n    this.state = {\n      items: items,\n    };\n\n    // Create a new selection if one is not specified\n    this._defaultSelection = new Selection({ onSelectionChanged: this.onSelectionChanged });\n  }\n\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  public addItems = (items: T[]): void => {\n    const processedItems: T[] | PromiseLike<T[]> = this.props.onItemSelected\n      ? (this.props.onItemSelected as any)(items)\n      : items;\n\n    const processedItemObjects: T[] = processedItems as T[];\n    const processedItemPromiseLikes: PromiseLike<T[]> = processedItems as PromiseLike<T[]>;\n\n    if (processedItemPromiseLikes && processedItemPromiseLikes.then) {\n      processedItemPromiseLikes.then((resolvedProcessedItems: T[]) => {\n        const newItems: T[] = this.state.items.concat(resolvedProcessedItems);\n        this.updateItems(newItems);\n      });\n    } else {\n      const newItems: T[] = this.state.items.concat(processedItemObjects);\n      this.updateItems(newItems);\n    }\n  };\n\n  public removeItemAt = (index: number): void => {\n    const { items } = this.state;\n\n    if (this._canRemoveItem(items[index])) {\n      if (index > -1) {\n        if (this.props.onItemsDeleted) {\n          (this.props.onItemsDeleted as (item: T[]) => void)([items[index]]);\n        }\n\n        const newItems = items.slice(0, index).concat(items.slice(index + 1));\n        this.updateItems(newItems);\n      }\n    }\n  };\n\n  public removeItem = (item: T): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(item);\n\n    this.removeItemAt(index);\n  };\n\n  public replaceItem = (itemToReplace: T, itemsToReplaceWith: T[]): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(itemToReplace);\n    if (index > -1) {\n      const newItems = items\n        .slice(0, index)\n        .concat(itemsToReplaceWith)\n        .concat(items.slice(index + 1));\n      this.updateItems(newItems);\n    }\n  };\n\n  public removeItems = (itemsToRemove: any[]): void => {\n    const { items } = this.state;\n    const itemsCanRemove = itemsToRemove.filter(item => this._canRemoveItem(item));\n    const newItems: T[] = items.filter(item => itemsCanRemove.indexOf(item) === -1);\n    const firstItemToRemove = itemsCanRemove[0];\n    const index: number = items.indexOf(firstItemToRemove);\n\n    if (this.props.onItemsDeleted) {\n      (this.props.onItemsDeleted as (item: T[]) => void)(itemsCanRemove);\n    }\n\n    this.updateItems(newItems, index);\n  };\n\n  public removeSelectedItems(): void {\n    if (this.state.items.length && this.selection.getSelectedCount() > 0) {\n      this.removeItems(this.selection.getSelection());\n    }\n  }\n\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If selectedItems is provided, this will act as a controlled component and will not update its own state.\n   */\n  public updateItems(items: T[], focusIndex?: number): void {\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to pass the new props\n      this.onChange(items);\n    } else {\n      this.setState({ items: items }, () => {\n        this._onSelectedItemsUpdated(items, focusIndex);\n      });\n    }\n  }\n\n  public onCopy = (ev: React.ClipboardEvent<HTMLElement>): void => {\n    if (this.props.onCopyItems && this.selection.getSelectedCount() > 0) {\n      const selectedItems: T[] = this.selection.getSelection() as T[];\n      this.copyItems(selectedItems);\n    }\n  };\n\n  public hasSelectedItems(): boolean {\n    return this.selection.getSelectedCount() > 0;\n  }\n\n  public componentDidUpdate(oldProps: P, oldState: IBaseSelectedItemsListState<IObjectWithKey>): void {\n    if (this.state.items && this.state.items !== oldState.items) {\n      this.selection.setItems(this.state.items);\n    }\n  }\n\n  public unselectAll(): void {\n    this.selection.setAllSelected(false);\n  }\n\n  public highlightedItems(): T[] {\n    return this.selection.getSelection() as T[];\n  }\n\n  public componentDidMount(): void {\n    this.selection.setItems(this.state.items);\n  }\n\n  protected get selection(): Selection {\n    return this.props.selection ?? this._defaultSelection;\n  }\n\n  public render(): any {\n    return this.renderItems();\n  }\n\n  protected renderItems = (): JSX.Element[] => {\n    const { removeButtonAriaLabel } = this.props;\n    const onRenderItem = this.props.onRenderItem as (props: ISelectedItemProps<T>) => JSX.Element;\n\n    const { items } = this.state;\n    return items.map((item: any, index: number) =>\n      onRenderItem({\n        item,\n        index,\n        key: item.key ? item.key : index,\n        selected: this.selection.isIndexSelected(index),\n        onRemoveItem: () => this.removeItem(item),\n        onItemChange: this.onItemChange,\n        removeButtonAriaLabel: removeButtonAriaLabel,\n        onCopyItem: (itemToCopy: T) => this.copyItems([itemToCopy]),\n      }),\n    );\n  };\n\n  protected onSelectionChanged = (): void => {\n    this.forceUpdate();\n  };\n\n  protected onChange(items?: T[]): void {\n    if (this.props.onChange) {\n      (this.props.onChange as (items?: T[]) => void)(items);\n    }\n  }\n\n  protected onItemChange = (changedItem: T, index: number): void => {\n    const { items } = this.state;\n\n    if (index >= 0) {\n      const newItems: T[] = items;\n      newItems[index] = changedItem;\n\n      this.updateItems(newItems);\n    }\n  };\n\n  protected copyItems(items: T[]): void {\n    if (this.props.onCopyItems) {\n      const copyText = (this.props.onCopyItems as any)(items);\n\n      const copyInput = document.createElement('input') as HTMLInputElement;\n      document.body.appendChild(copyInput);\n\n      try {\n        // Try to copy the text directly to the clipboard\n        copyInput.value = copyText;\n        copyInput.select();\n        if (!document.execCommand('copy')) {\n          // The command failed. Fallback to the method below.\n          throw new Error();\n        }\n      } catch (err) {\n        // no op\n      } finally {\n        document.body.removeChild(copyInput);\n      }\n    }\n  }\n\n  private _onSelectedItemsUpdated(items?: T[], focusIndex?: number): void {\n    this.onChange(items);\n  }\n\n  private _canRemoveItem(item: T): boolean {\n    return !this.props.canRemoveItem || this.props.canRemoveItem(item);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}